# ‚úÖ CHECKLIST TEST H·ªÜ TH·ªêNG QU·∫¢N L√ù KHO

## üéØ M·ª•c ti√™u
Test to√†n b·ªô t√≠nh nƒÉng Qu·∫£n l√Ω Kho ƒë·ªÉ ƒë·∫£m b·∫£o ho·∫°t ƒë·ªông ƒë√∫ng tr∆∞·ªõc khi ƒë∆∞a v√†o production.

---

## üìã Checklist Test

### 1Ô∏è‚É£ Chu·∫©n b·ªã m√¥i tr∆∞·ªùng

- [ ] Backend ƒëang ch·∫°y (`cd backend && npm start`)
- [ ] Frontend ƒëang ch·∫°y (`cd frontend && npm run dev`)
- [ ] Database c√≥ d·ªØ li·ªáu nguy√™n li·ªáu (b·∫£ng `nguyen_lieu`)
- [ ] C√≥ t√†i kho·∫£n Manager ho·∫∑c Admin ƒë·ªÉ test

**Command ki·ªÉm tra:**
```bash
# Terminal 1: Backend
cd d:/my-thesis/backend
npm start
# ‚Üí Should see: Server running on port 3000

# Terminal 2: Frontend
cd d:/my-thesis/frontend
npm run dev
# ‚Üí Should see: Local: http://localhost:5173/
```

---

### 2Ô∏è‚É£ Test Navigation (ƒêi·ªÅu h∆∞·ªõng)

- [ ] ƒêƒÉng nh·∫≠p v·ªõi t√†i kho·∫£n Manager/Admin
- [ ] V√†o trang Manager Dashboard (`/manager`)
- [ ] Th·∫•y n√∫t "üì¶ Qu·∫£n l√Ω Kho" ·ªü g√≥c d∆∞·ªõi b√™n tr√°i (m√†u t√≠m)
- [ ] Click n√∫t ‚Üí Chuy·ªÉn ƒë·∫øn `/inventory`
- [ ] Trang load th√†nh c√¥ng, kh√¥ng c√≥ l·ªói console

**Expected:**
- URL changes to: `http://localhost:5173/inventory`
- Page title: "üì¶ Qu·∫£n l√Ω Kho"
- 4 tabs hi·ªÉn th·ªã: T·ªìn kho | C·∫£nh b√°o | L·ªãch s·ª≠ xu·∫•t | L·ªãch s·ª≠ nh·∫≠p

---

### 3Ô∏è‚É£ Test Tab "üìä T·ªìn kho"

#### A. Load d·ªØ li·ªáu
- [ ] Tab "üìä T·ªìn kho" active by default
- [ ] Loading spinner hi·ªán ra
- [ ] B·∫£ng hi·ªÉn th·ªã danh s√°ch nguy√™n li·ªáu
- [ ] C√°c c·ªôt: M√£ | T√™n | T·ªìn kho | ƒê∆°n v·ªã | Gi√° nh·∫≠p | Gi√° tr·ªã t·ªìn

**Expected:**
- √çt nh·∫•t 1 d√≤ng d·ªØ li·ªáu (n·∫øu c√≥ trong database)
- S·ªë li·ªáu hi·ªÉn th·ªã ƒë√∫ng format (ti·ªÅn t·ªá c√≥ d·∫•u ph·∫©y)

#### B. Search (T√¨m ki·∫øm)
- [ ] G√µ t·ª´ kh√≥a v√†o √¥ "üîç T√¨m ki·∫øm..."
- [ ] K·∫øt qu·∫£ l·ªçc real-time (kh√¥ng c·∫ßn nh·∫•n Enter)
- [ ] T√¨m theo t√™n nguy√™n li·ªáu ‚Üí OK
- [ ] T√¨m theo m√£ nguy√™n li·ªáu ‚Üí OK
- [ ] X√≥a t·ª´ kh√≥a ‚Üí Hi·ªÉn th·ªã l·∫°i to√†n b·ªô

**Test cases:**
```
1. Search "c√† ph√™" ‚Üí Should show items containing "c√† ph√™"
2. Search "NL_" ‚Üí Should show items with code starting "NL_"
3. Search "xyz123" ‚Üí Should show "Kh√¥ng c√≥ d·ªØ li·ªáu"
4. Clear search ‚Üí Show all items again
```

#### C. Refresh
- [ ] Click n√∫t "üîÑ L√†m m·ªõi"
- [ ] Loading spinner hi·ªán ra
- [ ] D·ªØ li·ªáu reload th√†nh c√¥ng

---

### 4Ô∏è‚É£ Test Tab "‚ö†Ô∏è C·∫£nh b√°o"

#### A. Load dashboard
- [ ] Click tab "‚ö†Ô∏è C·∫£nh b√°o"
- [ ] 4 cards th·ªëng k√™ hi·ªÉn th·ªã:
  - T·ªïng s·ªë (m√†u x√°m)
  - H·∫øt h√†ng (m√†u ƒë·ªè)
  - S·∫Øp h·∫øt (m√†u v√†ng)
  - ƒê·ªß h√†ng (m√†u xanh)
- [ ] S·ªë li·ªáu trong cards ƒë√∫ng

**Expected:**
- T·ªïng s·ªë = H·∫øt h√†ng + S·∫Øp h·∫øt + ƒê·ªß h√†ng

#### B. B·∫£ng c·∫£nh b√°o
- [ ] B·∫£ng hi·ªÉn th·ªã danh s√°ch nguy√™n li·ªáu
- [ ] C·ªôt "Tr·∫°ng th√°i" c√≥ badge m√†u:
  - üî¥ H·∫æT H√ÄNG
  - ‚ö†Ô∏è S·∫ÆP H·∫æT
  - ‚úÖ ƒê·ª¶
- [ ] S·∫Øp x·∫øp: H·∫øt h√†ng ‚Üí S·∫Øp h·∫øt ‚Üí ƒê·ªß
- [ ] C·ªôt "L√†m ƒë∆∞·ª£c (ly)" hi·ªÉn th·ªã s·ªë ∆∞·ªõc t√≠nh

#### C. Refresh
- [ ] Click "üîÑ L√†m m·ªõi"
- [ ] Dashboard v√† b·∫£ng reload ƒë√∫ng

---

### 5Ô∏è‚É£ Test Tab "üì§ L·ªãch s·ª≠ xu·∫•t"

#### A. Load d·ªØ li·ªáu
- [ ] Click tab "üì§ L·ªãch s·ª≠ xu·∫•t"
- [ ] B·∫£ng hi·ªÉn th·ªã l·ªãch s·ª≠ (n·∫øu c√≥)
- [ ] C√°c c·ªôt: Th·ªùi gian | Nguy√™n li·ªáu | S·ªë l∆∞·ª£ng | ƒê∆°n h√†ng | Gi√° tr·ªã | Ghi ch√∫

**Expected:**
- S·ªë l∆∞·ª£ng c√≥ d·∫•u `-` v√† m√†u ƒë·ªè
- ƒê∆°n h√†ng hi·ªÉn th·ªã badge "ƒêH #123"

#### B. Filter theo ng√†y
- [ ] Ch·ªçn "T·ª´ ng√†y" (VD: 01/10/2025)
- [ ] Ch·ªçn "ƒê·∫øn ng√†y" (VD: 31/10/2025)
- [ ] Click n√∫t "üîç L·ªçc"
- [ ] K·∫øt qu·∫£ ch·ªâ hi·ªÉn th·ªã trong kho·∫£ng ƒë√£ ch·ªçn

**Test cases:**
```
1. Select last 7 days ‚Üí Show recent exports
2. Select future dates ‚Üí Show empty or no data
3. Select very old dates ‚Üí Show old exports (if any)
```

#### C. Search
- [ ] G√µ t√™n nguy√™n li·ªáu ‚Üí L·ªçc ƒë√∫ng
- [ ] G√µ s·ªë ƒë∆°n h√†ng (VD: "156") ‚Üí L·ªçc ƒë√∫ng
- [ ] K·∫øt h·ª£p filter ng√†y + search ‚Üí OK

---

### 6Ô∏è‚É£ Test Tab "üì• L·ªãch s·ª≠ nh·∫≠p"

#### A. Load d·ªØ li·ªáu
- [ ] Click tab "üì• L·ªãch s·ª≠ nh·∫≠p"
- [ ] B·∫£ng hi·ªÉn th·ªã l·ªãch s·ª≠ nh·∫≠p (n·∫øu c√≥)
- [ ] C√°c c·ªôt: Th·ªùi gian | Nguy√™n li·ªáu | S·ªë l∆∞·ª£ng | ƒê∆°n gi√° | Th√†nh ti·ªÅn | NCC | Ghi ch√∫

**Expected:**
- S·ªë l∆∞·ª£ng c√≥ d·∫•u `+` v√† m√†u xanh

#### B. Filter theo ng√†y
- [ ] Ch·ªçn "T·ª´ ng√†y" v√† "ƒê·∫øn ng√†y"
- [ ] Click "üîç L·ªçc"
- [ ] K·∫øt qu·∫£ ƒë√∫ng theo kho·∫£ng th·ªùi gian

#### C. Search
- [ ] T√¨m theo t√™n nguy√™n li·ªáu ‚Üí OK
- [ ] T√¨m theo nh√† cung c·∫•p ‚Üí OK

---

### 7Ô∏è‚É£ Test Form Nh·∫≠p Kho ‚≠ê (QUAN TR·ªåNG)

#### A. M·ªü form
- [ ] ·ªû tab "üì• L·ªãch s·ª≠ nh·∫≠p"
- [ ] Click n√∫t "‚ûï Nh·∫≠p kho" (m√†u xanh, g√≥c ph·∫£i)
- [ ] Modal popup hi·ªán ra v·ªõi title "üì• Nh·∫≠p kho m·ªõi"
- [ ] Form c√≥ 5 fields:
  1. Nguy√™n li·ªáu (dropdown) *
  2. S·ªë l∆∞·ª£ng *
  3. ƒê∆°n gi√° (VNƒê) *
  4. Nh√† cung c·∫•p
  5. Ghi ch√∫

**Expected:**
- Dropdown "Nguy√™n li·ªáu" load danh s√°ch (t·ª´ tab T·ªìn kho)
- Required fields c√≥ d·∫•u `*`

#### B. Validation
- [ ] Submit form r·ªóng ‚Üí Browser validation hi·ªán l·ªói
- [ ] Ch·ªâ ch·ªçn nguy√™n li·ªáu, kh√¥ng ƒëi·ªÅn s·ªë l∆∞·ª£ng ‚Üí L·ªói
- [ ] ƒêi·ªÅn s·ªë l∆∞·ª£ng √¢m ‚Üí L·ªói (HTML input validation)
- [ ] ƒêi·ªÅn ƒë∆°n gi√° = 0 ‚Üí L·ªói

**Test cases:**
```
‚ùå Empty form ‚Üí "Please fill out this field"
‚ùå Ingredient only ‚Üí "Please fill out this field" (quantity)
‚ùå Quantity = -10 ‚Üí Browser validation error
‚ùå Price = 0 ‚Üí Should not allow (step="1" validation)
```

#### C. Submit th√†nh c√¥ng
- [ ] Ch·ªçn nguy√™n li·ªáu: "C√† ph√™ ƒëen"
- [ ] S·ªë l∆∞·ª£ng: `10`
- [ ] ƒê∆°n gi√°: `100000`
- [ ] Nh√† cung c·∫•p: `C√¥ng ty ABC`
- [ ] Ghi ch√∫: `Test nh·∫≠p kho`
- [ ] Click "‚úÖ X√°c nh·∫≠n nh·∫≠p"
- [ ] Alert hi·ªán ra: "‚úÖ Nh·∫≠p kho th√†nh c√¥ng!"
- [ ] Form t·ª± ƒë·ªông ƒë√≥ng
- [ ] B·∫£ng l·ªãch s·ª≠ nh·∫≠p reload v√† c√≥ b·∫£n ghi m·ªõi

**Expected backend behavior:**
1. POST `/api/v1/inventory/import` with payload
2. Database: INSERT v√†o `nhap_kho`
3. Database: UPDATE `nguyen_lieu` SET `ton_kho` += 10
4. Response: { ok: true, data: {...} }

#### D. Verify c·∫≠p nh·∫≠t
- [ ] Quay l·∫°i tab "üìä T·ªìn kho"
- [ ] T√¨m nguy√™n li·ªáu v·ª´a nh·∫≠p
- [ ] T·ªìn kho tƒÉng ƒë√∫ng s·ªë l∆∞·ª£ng (c≈© + 10)

**Example:**
```
Before: C√† ph√™ ƒëen - T·ªìn kho: 5 kg
After:  C√† ph√™ ƒëen - T·ªìn kho: 15 kg (‚úÖ TƒÉng 10 kg)
```

#### E. Ki·ªÉm tra database (Optional)
```sql
-- Check nhap_kho table
SELECT * FROM nhap_kho ORDER BY ngay_nhap DESC LIMIT 1;

-- Check nguyen_lieu stock updated
SELECT ma, ten, ton_kho FROM nguyen_lieu WHERE ten LIKE '%C√† ph√™ ƒëen%';
```

---

### 8Ô∏è‚É£ Test Responsive Design

#### A. Desktop (>1024px)
- [ ] Layout ƒë·∫ßy ƒë·ªß, kh√¥ng scroll ngang
- [ ] Tabs n·∫±m ngang
- [ ] B·∫£ng hi·ªÉn th·ªã full width
- [ ] Form modal ·ªü gi·ªØa m√†n h√¨nh

#### B. Tablet (768px - 1024px)
- [ ] Tabs c√≥ th·ªÉ xu·ªëng d√≤ng
- [ ] B·∫£ng c√≥ scroll ngang n·∫øu c·∫ßn
- [ ] Form modal v·∫´n ·ªü gi·ªØa

#### C. Mobile (<768px)
- [ ] Header responsive
- [ ] Tabs stack vertically ho·∫∑c scroll
- [ ] B·∫£ng scroll ngang
- [ ] Form modal chi·∫øm full screen
- [ ] N√∫t "‚Üê Quay l·∫°i Dashboard" v·∫´n visible

**Test v·ªõi Chrome DevTools:**
```
1. F12 ‚Üí Toggle device toolbar
2. Test iPhone SE (375px)
3. Test iPad (768px)
4. Test Desktop (1920px)
```

---

### 9Ô∏è‚É£ Test Error Handling

#### A. Backend offline
- [ ] Stop backend server
- [ ] Reload trang Inventory
- [ ] Th·∫•y error message trong console
- [ ] UI kh√¥ng crash, hi·ªÉn th·ªã empty state

**Expected:**
- Console: "Failed to fetch" or similar
- Table: "Kh√¥ng c√≥ d·ªØ li·ªáu" ho·∫∑c error message

#### B. Invalid API response
- [ ] (Advanced) Mock API tr·∫£ v·ªÅ l·ªói 500
- [ ] UI hi·ªÉn th·ªã error gracefully
- [ ] Kh√¥ng crash to√†n b·ªô app

#### C. Network timeout
- [ ] (Advanced) Simulate slow network
- [ ] Loading spinner hi·ªÉn th·ªã l√¢u h∆°n
- [ ] Eventually loads or shows error

---

### üîü Test Permissions

#### A. Manager/Admin access
- [ ] Login as Manager ‚Üí ‚úÖ Truy c·∫≠p ƒë∆∞·ª£c `/inventory`
- [ ] Login as Admin ‚Üí ‚úÖ Truy c·∫≠p ƒë∆∞·ª£c `/inventory`

#### B. Unauthorized access
- [ ] Login as Cashier ‚Üí üö´ Kh√¥ng th·∫•y n√∫t "Qu·∫£n l√Ω Kho"
- [ ] Truy c·∫≠p tr·ª±c ti·∫øp `/inventory` ‚Üí üö´ Redirect ho·∫∑c 403

**Test:**
```
1. Logout
2. Login as cashier (if exists)
3. Try to access http://localhost:5173/inventory
4. Should be blocked by RoleGuard
```

---

### 1Ô∏è‚É£1Ô∏è‚É£ Test Performance

#### A. Load time
- [ ] First load < 2 seconds
- [ ] Tab switch < 500ms
- [ ] Search typing no lag

#### B. Large dataset
- [ ] (If possible) Test v·ªõi 100+ nguy√™n li·ªáu
- [ ] Pagination or virtual scrolling works
- [ ] Search still fast

#### C. Memory usage
- [ ] Open Chrome Task Manager
- [ ] Memory usage reasonable (<100MB)
- [ ] No memory leaks after multiple tab switches

---

### 1Ô∏è‚É£2Ô∏è‚É£ Test Integration v·ªõi h·ªá th·ªëng hi·ªán c√≥

#### A. Sau khi order PAID
- [ ] T·∫°o ƒë∆°n h√†ng m·ªõi ·ªü POS
- [ ] Th√™m m√≥n v√†o ƒë∆°n
- [ ] Checkout v√† thanh to√°n (chuy·ªÉn PAID)
- [ ] Quay l·∫°i Inventory ‚Üí Tab "üì§ L·ªãch s·ª≠ xu·∫•t"
- [ ] Th·∫•y b·∫£n ghi xu·∫•t kho t·ª± ƒë·ªông v·ªõi `don_hang_id`

**Expected:**
- Export record v·ªõi:
  - Nguy√™n li·ªáu ƒë∆∞·ª£c xu·∫•t
  - S·ªë l∆∞·ª£ng ƒë√∫ng theo recipe
  - ƒê∆°n h√†ng ID ƒë√∫ng
  - Th·ªùi gian = th·ªùi gian PAID

#### B. Manager Dashboard integration
- [ ] T·ª´ Inventory, click "‚Üê Quay l·∫°i Dashboard"
- [ ] V·ªÅ Manager Dashboard ƒë√∫ng
- [ ] Click l·∫°i "üì¶ Qu·∫£n l√Ω Kho" ‚Üí V√†o Inventory ƒë√∫ng

---

### 1Ô∏è‚É£3Ô∏è‚É£ Test Edge Cases

#### A. Empty database
- [ ] Database kh√¥ng c√≥ nguy√™n li·ªáu
- [ ] Tab T·ªìn kho: "Kh√¥ng c√≥ d·ªØ li·ªáu"
- [ ] Form nh·∫≠p: Dropdown r·ªóng ho·∫∑c message

#### B. Very long text
- [ ] Nguy√™n li·ªáu c√≥ t√™n d√†i > 50 k√Ω t·ª±
- [ ] Table cell kh√¥ng v·ª° layout
- [ ] Text truncate ho·∫∑c wrap ƒë√∫ng

#### C. Special characters
- [ ] Nh√† cung c·∫•p: "C√¥ng ty ABC & XYZ (Vi·ªát Nam)"
- [ ] Ghi ch√∫: "Test v·ªõi @#$%^&*()"
- [ ] Submit th√†nh c√¥ng, kh√¥ng l·ªói SQL injection

#### D. Very large numbers
- [ ] S·ªë l∆∞·ª£ng: 999999999
- [ ] ƒê∆°n gi√°: 999999999
- [ ] Th√†nh ti·ªÅn t√≠nh ƒë√∫ng, format ƒë·∫πp

---

## üìä Test Summary Report

Sau khi test xong, ƒëi·ªÅn k·∫øt qu·∫£:

```
Total tests: ____ / 100+
Passed: ____
Failed: ____
Blocked: ____

Critical issues: ____
Minor issues: ____
```

---

## üêõ Bug Report Template

N·∫øu t√¨m th·∫•y l·ªói, ghi l·∫°i theo format:

```markdown
### Bug #X: [Ti√™u ƒë·ªÅ ng·∫Øn g·ªçn]

**Severity:** Critical / Major / Minor
**Component:** Frontend / Backend / Database
**Steps to reproduce:**
1. ...
2. ...
3. ...

**Expected:** ...
**Actual:** ...
**Screenshot:** [Attach if possible]
**Console logs:** [Copy error messages]

**Environment:**
- OS: Windows / Mac / Linux
- Browser: Chrome / Firefox / Safari
- Screen size: Desktop / Mobile
```

---

## ‚úÖ Sign-off

Sau khi test xong v√† kh√¥ng c√≥ l·ªói critical:

- [ ] All critical features work
- [ ] No blocking bugs
- [ ] Documentation is clear
- [ ] Performance is acceptable

**Tested by:** ______________
**Date:** ______________
**Status:** ‚úÖ Approved / ‚ùå Need fixes

---

## üöÄ Ready for Production

N·∫øu t·∫•t c·∫£ tests pass:

```bash
# Deploy to production
git add .
git commit -m "feat: Add Inventory Management System"
git push origin master

# Tag version
git tag v1.1.0-inventory
git push origin v1.1.0-inventory
```

---

**Happy Testing! üéâ**
