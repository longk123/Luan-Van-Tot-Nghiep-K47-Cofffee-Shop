[1mdiff --git a/backend/src/routes/pos.js b/backend/src/routes/pos.js[m
[1mindex b7101e0..c2706b0 100644[m
[1m--- a/backend/src/routes/pos.js[m
[1m+++ b/backend/src/routes/pos.js[m
[36m@@ -67,6 +67,65 @@[m [mrouter.get('/menu/search', auth, async (req, res, next) => {[m
   } catch (e) { next(e); }[m
 });[m
 [m
[32m+[m[32m// POST /api/v1/pos/orders/claim-delivery - NhÃ¢n viÃªn phá»¥c vá»¥ tá»± nháº­n Ä‘Æ¡n giao hÃ ng (1 hoáº·c nhiá»u Ä‘Æ¡n)[m
[32m+[m[32m// âš ï¸ PHáº¢I Ä‘áº·t TRÆ¯á»šC /orders/:banId Ä‘á»ƒ Express khÃ´ng match nháº§m[m
[32m+[m[32mrouter.post('/orders/claim-delivery', auth, async (req, res, next) => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    console.log('ðŸ” [CLAIM-DELIVERY] Request received');[m
[32m+[m[32m    console.log('ðŸ” [CLAIM-DELIVERY] Request body:', JSON.stringify(req.body, null, 2));[m
[32m+[m[41m    [m
[32m+[m[32m    if (!req.body || !req.body.orderIds) {[m
[32m+[m[32m      return res.status(400).json({[m
[32m+[m[32m        success: false,[m
[32m+[m[32m        error: 'Dá»¯ liá»‡u khÃ´ng há»£p lá»‡',[m
[32m+[m[32m        details: ['orderIds lÃ  báº¯t buá»™c'][m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    const orderIds = req.body.orderIds;[m
[32m+[m[41m    [m
[32m+[m[32m    if (!Array.isArray(orderIds) || orderIds.length === 0) {[m
[32m+[m[32m      return res.status(400).json({[m
[32m+[m[32m        success: false,[m
[32m+[m[32m        error: 'Dá»¯ liá»‡u khÃ´ng há»£p lá»‡',[m
[32m+[m[32m        details: ['orderIds pháº£i lÃ  má»™t máº£ng khÃ´ng rá»—ng'][m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    if (orderIds.length > 10) {[m
[32m+[m[32m      return res.status(400).json({[m
[32m+[m[32m        success: false,[m
[32m+[m[32m        error: 'Dá»¯ liá»‡u khÃ´ng há»£p lá»‡',[m
[32m+[m[32m        details: ['Chá»‰ cÃ³ thá»ƒ nháº­n tá»‘i Ä‘a 10 Ä‘Æ¡n má»—i láº§n'][m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // Validate vÃ  chuyá»ƒn Ä‘á»•i tá»«ng ID sang sá»‘ nguyÃªn[m
[32m+[m[32m    const validatedOrderIds = [];[m
[32m+[m[32m    for (const id of orderIds) {[m
[32m+[m[32m      const numId = parseInt(id, 10);[m
[32m+[m[32m      if (isNaN(numId) || numId <= 0) {[m
[32m+[m[32m        return res.status(400).json({[m
[32m+[m[32m          success: false,[m
[32m+[m[32m          error: 'Dá»¯ liá»‡u khÃ´ng há»£p lá»‡',[m
[32m+[m[32m          details: [`ID Ä‘Æ¡n khÃ´ng há»£p lá»‡: ${id}`][m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m      validatedOrderIds.push(numId);[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    const shipperId = req.user.user_id;[m
[32m+[m[32m    console.log('âœ… [CLAIM-DELIVERY] Validation passed. OrderIds:', validatedOrderIds, 'ShipperId:', shipperId);[m
[32m+[m[41m    [m
[32m+[m[32m    const result = await service.default.claimDeliveryOrders(validatedOrderIds, shipperId);[m
[32m+[m[32m    console.log('âœ… [CLAIM-DELIVERY] Success:', result);[m
[32m+[m[32m    res.json({ success: true, data: result });[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    console.error('âŒ [CLAIM-DELIVERY] Error:', e);[m
[32m+[m[32m    next(e);[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
 // POST /api/v1/pos/orders (táº¡o Ä‘Æ¡n mang Ä‘i hoáº·c giao hÃ ng)[m
 // body: { order_type: 'TAKEAWAY' | 'DELIVERY', nhan_vien_id, ca_lam_id? }[m
 router.post('/orders', auth, async (req, res, next) => {[m
[36m@@ -160,70 +219,6 @@[m [mrouter.get('/delivery-orders', auth, async (req, res, next) => {[m
   } catch (e) { next(e); }[m
 });[m
 [m
[31m-// POST /api/v1/pos/orders/claim-delivery - NhÃ¢n viÃªn phá»¥c vá»¥ tá»± nháº­n Ä‘Æ¡n giao hÃ ng (1 hoáº·c nhiá»u Ä‘Æ¡n)[m
[31m-router.post('/orders/claim-delivery', auth, async (req, res, next) => {[m
[31m-  try {[m
[31m-    // Log Ä‘á»ƒ debug[m
[31m-    console.log('ðŸ” Claim delivery request body:', JSON.stringify(req.body, null, 2));[m
[31m-    console.log('ðŸ” Request body type:', typeof req.body);[m
[31m-    console.log('ðŸ” Request body keys:', Object.keys(req.body || {}));[m
[31m-    [m
[31m-    // Kiá»ƒm tra trá»±c tiáº¿p náº¿u cÃ³ orderIds[m
[31m-    if (!req.body || !req.body.orderIds) {[m
[31m-      return res.status(400).json({[m
[31m-        success: false,[m
[31m-        error: 'orderIds lÃ  báº¯t buá»™c'[m
[31m-      });[m
[31m-    }[m
[31m-    [m
[31m-    const orderIds = req.body.orderIds;[m
[31m-    [m
[31m-    // Validate thá»§ cÃ´ng[m
[31m-    if (!Array.isArray(orderIds)) {[m
[31m-      return res.status(400).json({[m
[31m-        success: false,[m
[31m-        error: 'orderIds pháº£i lÃ  má»™t máº£ng'[m
[31m-      });[m
[31m-    }[m
[31m-    [m
[31m-    if (orderIds.length === 0) {[m
[31m-      return res.status(400).json({[m
[31m-        success: false,[m
[31m-        error: 'Pháº£i chá»n Ã­t nháº¥t 1 Ä‘Æ¡n'[m
[31m-      });[m
[31m-    }[m
[31m-    [m
[31m-    if (orderIds.length > 10) {[m
[31m-      return res.status(400).json({[m
[31m-        success: false,[m
[31m-        error: 'Chá»‰ cÃ³ thá»ƒ nháº­n tá»‘i Ä‘a 10 Ä‘Æ¡n má»—i láº§n'[m
[31m-      });[m
[31m-    }[m
[31m-    [m
[31m-    // Validate vÃ  chuyá»ƒn Ä‘á»•i tá»«ng ID sang sá»‘ nguyÃªn[m
[31m-    const validatedOrderIds = [];[m
[31m-    for (const id of orderIds) {[m
[31m-      const numId = parseInt(id, 10);[m
[31m-      if (isNaN(numId) || numId <= 0) {[m
[31m-        return res.status(400).json({[m
[31m-          success: false,[m
[31m-          error: `ID Ä‘Æ¡n khÃ´ng há»£p lá»‡: ${id}`[m
[31m-        });[m
[31m-      }[m
[31m-      validatedOrderIds.push(numId);[m
[31m-    }[m
[31m-    [m
[31m-    // Sá»­ dá»¥ng validatedOrderIds thay vÃ¬ orderIds gá»‘c[m
[31m-    const finalOrderIds = validatedOrderIds;[m
[31m-    [m
[31m-    const shipperId = req.user.user_id; // NhÃ¢n viÃªn phá»¥c vá»¥ tá»± claim[m
[31m-    [m
[31m-    console.log('âœ… Validated orderIds:', finalOrderIds);[m
[31m-    const result = await service.default.claimDeliveryOrders(finalOrderIds, shipperId);[m
[31m-    res.json({ success: true, data: result });[m
[31m-  } catch (e) { next(e); }[m
[31m-});[m
[31m-[m
 // PATCH /api/v1/pos/orders/:orderId/delivery-status - Cáº­p nháº­t tráº¡ng thÃ¡i giao hÃ ng[m
 router.patch('/orders/:orderId/delivery-status', auth, async (req, res, next) => {[m
   try {[m
